window.gMap=function(selector,options){var ctor=this;return ctor.defaultLatLng={lat:38.89734567323064,lng:-77.03656196594238},ctor.selector="object"==typeof selector?selector:document.querySelector(selector),ctor.extendOptions=function(_defaults,_options){for(var p in _options)try{_options[p].constructor==Object?_defaults[p]=ctor.extendOptions(_defaults[p],_options[p]):_defaults[p]=_options[p]}catch(e){_defaults[p]=_options[p]}return _defaults},ctor.data=function(){var data=ctor.selector.dataset;return data},ctor.getOption=function(option){return parseInt(this.data()[option])},ctor.getBool=function(option){return option=this.data()[option],option="undefined"==typeof option?"undefined":/^true$/i.test(option)},ctor.center=function(){var center=new google.maps.LatLng(ctor.data().lat||ctor.defaultLatLng.lat,ctor.data().lng||ctor.defaultLatLng.lng);return center},ctor.mapMarkers=[],ctor.options=ctor.extendOptions({zoom:14,center:ctor.center(),scrollwheel:"undefined"===ctor.getBool("scrollwheel")?!1:ctor.getBool("scrollwheel"),disableDefaultUI:"undefined"===ctor.getBool("disableDefaultUI")?!0:ctor.getBool("disableDefaultUI"),zoomControl:"undefined"===ctor.getBool("zoomControl")?!0:ctor.getBool("zoomControl"),mapTypeControl:"undefined"===ctor.getBool("mapTypeControl")?!0:ctor.getBool("mapTypeControl"),scaleControl:"undefined"===ctor.getBool("scaleControl")?!0:ctor.getBool("scaleControl"),streetViewControl:"undefined"===ctor.getBool("streetViewControl")?!0:ctor.getBool("streetViewControl"),rotateControl:"undefined"===ctor.getBool("rotateControl")?!0:ctor.getBool("rotateControl"),fullscreenControl:"undefined"===ctor.getBool("fullscreenControl")?!0:ctor.getBool("fullscreenControl"),markers:[],markerIcon:null,drag:function(map){},dragend:function(map){},dragstart:function(map){},mapClick:function(event,pos,map){},mousemove:function(event,pos,map){},mouseout:function(event,pos,map){},mouseover:function(event,pos,map){},rightclick:function(map){},zoomChange:function(map,zoom){},markerClick:function(marker){}},options),ctor.setMarker=function(marker){marker.infoWindow&&ctor.createInfoWindow(marker),marker.setMap(ctor.map)},ctor.addMarker=function(marker){var newMarker=new google.maps.Marker(marker);newMarker.infoWindow&&ctor.createInfoWindow(newMarker),ctor.mapMarkers.push(newMarker),ctor.setMarker(newMarker)},ctor.createInfoWindow=function(marker){var infowindow=new google.maps.InfoWindow({content:ctor.getInfoWindow(marker)});marker.addListener("click",function(){infowindow.open(ctor.map,marker),ctor.options.markerClick.call(ctor,marker)})},ctor.getInfoWindow=function(marker){var infoContent,info=marker.infoWindow,type=info.type||"html";return infoContent=ctor["getInfoWin_"+type](info)},ctor.getInfoWin_image=function(info){return'<img src="'+info.content+'" alt=""/>'},ctor.getInfoWin_html=function(info){return info.content},ctor.getInfoWin_selector=function(info){return document.querySelector(info.content).innerHTML},ctor.getInfoWin_video=function(info){return'<video src="'+info.content+'"></video>'},ctor.createMarkers=function(){ctor.options.markers.length&&(ctor.deleteMarkers(),ctor.options.markers.forEach(function(marker,index){marker.icon=marker.icon||ctor.options.markerIcon,ctor.mapMarkers[index]=new google.maps.Marker(marker),ctor.setMarker(ctor.mapMarkers[index])}))},ctor.deleteMarkers=function(){if(ctor.mapMarkers)for(var i=0;i<ctor.mapMarkers.length;i++)ctor.mapMarkers[i].setMap(null),ctor.mapMarkers.splice(i,1)},ctor.deleteMarker=function(index){ctor.mapMarkers[index]&&(ctor.mapMarkers[index].setMap(null),ctor.mapMarkers.splice(index,1))},ctor.create=function(){ctor.map=new google.maps.Map(ctor.selector,ctor.options),ctor.mapEvents(),ctor.createMarkers()},ctor.mapEvents=function(){ctor.map.addListener("drag",function(){ctor.options.drag.call(ctor,ctor.map)}),ctor.map.addListener("dragend",function(){ctor.options.dragend.call(ctor,ctor.map)}),ctor.map.addListener("dragstart",function(){ctor.options.dragstart.call(ctor,ctor.map)}),ctor.map.addListener("click",function(e){ctor.options.mapClick.call(ctor,e,e.latLng.toJSON(),ctor.map)}),ctor.map.addListener("mousemove",function(e){ctor.options.mousemove.call(ctor,e,e.latLng.toJSON(),ctor.map)}),ctor.map.addListener("mouseover",function(e){ctor.options.mouseover.call(ctor,e,e.latLng.toJSON(),ctor.map)}),ctor.map.addListener("rightclick",function(e){ctor.options.rightclick.call(ctor,e,e.latLng.toJSON(),ctor.map)}),ctor.map.addListener("zoom_changed",function(e){ctor.options.zoomChange.call(ctor,ctor.map,ctor.map.getZoom())})},ctor.goCenter=function(){ctor.map.setCenter(ctor.options.center)},ctor.create(),ctor};